<html>
<script src="https://cdnjs.cloudflare.com/ajax/libs/Chart.js/2.9.4/Chart.js">
</script>

<style>
    .modal {
        border: 1px solid black;
        display: none;
    }
</style>

<body>
    <canvas id="myChart" style="width:100%;max-width:600px"></canvas>

    <!-- onClick="showchart('<%= date %>', '<%= price %>')" -->

    <button class="button" id="btn1" value="<%= date %>">
        Edit
    </button>
    <input type="hidden" id="btn2" value="<%= price %>">
    </input>

    <div id="myModal" class="modal">
        <div class="modalContent">
            <span class="close"> &times; </span>
            <canvas id="myChart"></canvas>
        </div>
    </div>

    <script>
        function renderChart(date, price) {
            console.log(date)
            console.log(price)
            console.log(typeof (date))

            var xValues = date
            var yValues = price
            const xArray = xValues.split(",")
            const yArray = yValues.split(",")

            var ctx = document.getElementById("myChart").getContext('2d');
            var myChart = new Chart(ctx, {
                type: 'line',
                data: {
                    labels: xArray,
                    datasets: [{
                        fill: false,
                        lineTension: 0,
                        backgroundColor: "rgba(0,0,255,1.0)",
                        borderColor: "rgba(0,0,255,0.1)",
                        data: yArray
                    }]
                },
                options: {
                    legend: { display: false },
                    scales: {
                        yAxes: [{ ticks: { min: 10, max: 100 } }],
                    }
                }
            });
        }
        var modal = document.getElementById("myModal");
        var btn = document.getElementById("btn");
        var span = document.getElementsByClassName("close")[0];
        var date = document.getElementById("btn1").value;
        var price = document.getElementById("btn2").value;

        btn1.onclick = function () {
            modal.style.display = 'block'
            renderChart(date, price);
        }

        span.onclick = function () {
            modal.style.display = 'none';
        }

        window.onclick = function (event) {
            if (event.target == modal) {
                modal.style.display = 'none';
            }
        }
    </script>

    <script>
        async function showchart(date, price) {

            var xValues = date
            var yValues = price

            const xArray = xValues.split(",")
            const yArray = yValues.split(",")

            // alert(typeof (xArray))
            // alert(typeof (yArray))

            // console.log(xArray)
            // console.log(yArray)

            // var xValuess = ['11-3-2022', '12-3-2022', '13-3-2022', '14-3-2022', '15-3-2022', '16-3-2022', '17-3-2022', '18-3-2022', '19-3-2022', '20-3-2022', '21-3-2022', '22-3-2022'];
            // var yValuess = [20, 21, 21, 21, 21, 21, 21, 19, 19, 19, 10, 10];

            // alert(typeof (xValuess))
            // alert(typeof (yValuess))

            new Chart("myChart", {
                type: "line",
                data: {
                    labels: xArray,
                    datasets: [{
                        fill: false,
                        lineTension: 0,
                        backgroundColor: "rgba(0,0,255,1.0)",
                        borderColor: "rgba(0,0,255,0.1)",
                        data: yArray
                    }]
                },
                options: {
                    legend: { display: false },
                    scales: {
                        yAxes: [{ ticks: { min: 10, max: 100 } }],
                    }
                }
            });
        }
    </script>

</body>